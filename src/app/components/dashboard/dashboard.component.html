<!-- Top navigation -->
<!-- <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0">
      <img class="brand-logo" src="assets/logo-positronx-white.svg" alt="positronX.io Logo">
    </a>
  </nav> -->
  <!-- Sidebar navigation -->
  <!-- <div class="container-fluid">
    <div class="row">
      <nav class="col-md-2 d-md-block bg-light sidebar">
        <div class="sidebar-sticky">
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link active">
                <i class="fas fa-user"></i>User Profile
              </a>
            </li> -->
            <!-- Calling SignOut() Api from AuthService -->
            <!-- <li class="nav-item">
              <a class="nav-link" (click)="authService.SignOut()">
                <i class="fas fa-sign-out-alt"></i>Log out
              </a>
            </li>
          </ul>
        </div>
      </nav> -->
      <!-- Main content -->
      <!-- <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
        <div class="inner-adjust">
          <div class="pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">User Profile</h1>
          </div> -->
          <!-- Show user data when logged in -->
          <!-- <div class="row" *ngIf="authService.userData as user">
            <div class="col-md-12">
              <div class="media">
                <img class="align-self-start mr-5 img-thumbnail rounded-circle" src="{{(user.photoURL) ? user.photoURL : '/assets/dummy-user.png'}}"
                  alt="{{user.displayName}}">
                <div class="media-body">
                  <h1>Hello: <strong>{{(user.displayName) ? user.displayName : 'User'}}</strong></h1>
                  <p>User ID: <strong>{{user.uid}}</strong></p>
                  <p>Email: <strong>{{user.email}}</strong></p>
                  <p>Email Verified: <strong>{{user.emailVerified}}</strong></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div> -->
  <style>
    .loader {
      border: 16px solid #f3f3f3;
      border-radius: 50%;
      border-top: 16px solid #3498db;
      margin-left: 40%;
      margin-top: 10%;
      width: 120px;
      height: 120px;
      -webkit-animation: spin 2s linear infinite; /* Safari */
      animation: spin 2s linear infinite;
    }
    
    /* Safari */
    @-webkit-keyframes spin {
      0% { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    </style>
<mat-toolbar color="primary"  class="bg-blue-700 flex flex-row">
    <button mat-icon-button class="example-icon" aria-label="Example icon-button with menu icon">
      <mat-icon (click)="this.sideNav.open()"  *ngIf="!sideNav?.opened">menu</mat-icon>
      <mat-icon (click)="this.sideNav.close()" *ngIf="sideNav?.opened">close</mat-icon>
  </button>
  <div class="" style="display: flex;justify-content: space-evenly;width: 100%;">
    <div class="flex w-full">
      <div *ngIf="authService.userData as user" class="font-bold">
        <button (click)="homeRec(user.displayName)" >News Pool</button>
      </div>
      <div class="relative w-full hidden sm:block mx-5">
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
              <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg>
          </div>
          <input [(ngModel)]="newQuery.searchText" type="text" id="simple-search" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Search" required>
      </div> 
      <button *ngIf="authService.userData as user" (click)="searchQuery(newQuery.searchText,user.displayName)"  type="submit" class="hidden sm:block p-2.5 ml-1 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
          <span class="sr-only">Search</span>
      </button>
    </div>
    
    <div *ngIf="authService.userData as user" style="margin-left: 1%;" class="flex flex-row">
      <span class="hidden lg:block" style="">{{(user.displayName) ? user.displayName : 'User'}}</span>
      <button class="ml-2 bg-blue-600 p-2 rounded text text-sm md:text-base" (click)="authService.SignOut()">SignOut</button>
    </div>
  </div>
</mat-toolbar>
<mat-sidenav-container class="flex column" style="height: 100%;" >
    <mat-sidenav style="scrollbar-color: balck;width:200px" #sidenav="matSidenav" class="flex column h-screen w-30 sm:60">
        <img class="avatar mat-elavation-z8" height="100px" width="200px" src="https://img.freepik.com/premium-vector/hand-holding-megaphone-with-exciting-news-megaphone-banner-web-design-vector-stock-illustration_100456-11045.jpg?w=2000" alt="">
        <h4 class="name m-5">Select Channel</h4>
        <mat-divider></mat-divider>

        <ng-container class="flex column h-screen w-60" *ngFor="let source of sources">
            <button (click)="searchSource(source)" mat-button class="menu-button">
            <mat-icon>event_note</mat-icon>
            <span>{{source.name}}</span>
        </button>
        </ng-container>


        <mat-divider></mat-divider>
        <button mat-button class="menu-button">
        <mat-icon>settings</mat-icon>
        <span>Settings</span>
    </button>
    </mat-sidenav>
    <mat-sidenav-content class="content mat-elevation-z4 h-full">
        <section class="text-gray-600 bg-gray-100 body-font h-full">
            <div class="container px-5  mx-auto max-w-7x1">
                <div class="flex flex-wrap w-full mb-4 p-4">
                    <div *ngIf="authService.userData as user" class="w-full mb-6 lg:mb-0 flex flex-col md:flex-row">
                        <button style="border-bottom: 2px solid blue;" class="sm:text-3xl text-5xl font-medium title-font mb-2 text-gray-900">{{selectedNewsChannel}}</button>
                        <button *ngIf="selectedNewsChannel!='Recommended For You'" (click)="homeRec(user.displayName)" style="border-bottom: 2px solid rgb(0, 153, 46); color: darkgrey;" class="sm:text-3xl text-5xl ml-2 font-medium title-font mb-2 text-gray-900">Recommended For You</button>
                    </div>
                </div>
                <div class="block sm:hidden flex flex-row mb-5">
                  <input [(ngModel)]="newQuery.searchText" type="text" id="simple-search" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Search" required>
                  <button *ngIf="authService.userData as user" (click)="searchQuery(newQuery.searchText,user.displayName)"  type="button" class=" p-2.5 ml-1 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    <span class="sr-only">Search</span>
                </button>
                </div>
                <div class="flex flex-wrap -m-4">
                    <ng-container *ngIf="articles.length==0 && isloaded">
                <span class="text-[30px] m-20 h-60 leading-6">No Results for "{{newQuery.searchText}}" <mat-icon class="example-icon">face</mat-icon></span>
                </ng-container>
                <div class="container justify-center">
                  <div *ngIf="isloaded==false" class="loader"></div>
                </div>
                
                  <ng-container  #Queryresult *ngFor="let article of articles">
                    <div class="xl:w-1/3 md:w-1/2 p-4">
                        <div class="bg-white p-6 rounded-lg">
                            <img class="lg:h-60 xl:h-56 md:h-64 sm:h-72 xs:h-72 h-72  rounded w-full object-cover object-center mb-6" [src]="article.urlToImage" alt="Image Size 720x400">
                            <div class="flex justify-between">
                                <h3 class="tracking-widest text-indigo-500 text-xs font-medium title-font">Author: {{article.author}}</h3>
                                <h4 style="text-overflow: ellipsis;
                                display: -webkit-box;" class="tracking-widest text-gray-800 text-sm">{{article.publishedAt | date:'medium'}}</h4>
                            </div>
                            <h2 class="text-lg text-gray-900 font-medium title-font mb-4 overflow-hidden">{{article.title}}</h2>
                            <p class="leading-relaxed text-base" [innerHtml]="article.description"></p><span><a class="text-blue-500" href="{{article.url}}" target="_blank">read more....</a></span>
                        </div>
                    </div>
                </ng-container>
                </div>
                   

                </div>
        </section>
    </mat-sidenav-content>
</mat-sidenav-container>
